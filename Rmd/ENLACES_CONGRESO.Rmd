---
title: ''
output:
  html_document:
    df_print: paged
    css: styles/MODULO.css
    # self_contained: false
    # lib_dir: libs
  pdf_document: default
always_allow_html: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE, error=FALSE)
```

```{r librerías, include=FALSE}
list.of.packages <- c("jsonlite", "ggplot2", "knitr", "data.table", "plotly", "plyr", "dplyr", "scales", "htmlwidgets", "sf", "fuzzyjoin", "xml2", "XML", "tidyverse", "tmap", "magrittr")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
sapply(list.of.packages, require, character.only = TRUE)
```

```{r Funciones Enlaces, results="asis"}
get_indicator_mod = function(url, label) {
  return(sprintf("<div class='column-modulo-link'><p class='label_l'><a href=%s target='_blank'>%s</a></p></div>", url, label))
}
get_indicator_mod_first = function(url, label) {
  return(sprintf("<div class='column-modulo-link'><p class='label_l'><a href=%s target='_blank'>%s</a></p><hr class='separator'/>", url, label))
}
get_indicator_mod_last = function(url, label) {
  return(sprintf("<p class='label_l'><a href=%s target='_blank'>%s</a></p></div>", url, label))
}
```

```{r csv Enlaces}
links <- read.csv2("../enlaces.csv", encoding = "UTF-8", sep = ",")
colnames(links)[1] <- "Tematica"
df_links <- links %>%
  filter(Tematica == "congreso") %>%
  select(!c(Tematica, Otros))
```

<!-- HTML -->
<h1 style="color: #008BD0; margin: 0; font-size: 36px;">Enlaces a los datos</h1>
<hr>
<h3 style="color: #666; margin: 12px; font-size: 16px;">Al pinchar en los títulos de la izquierda se accede a las tablas con las que se ha elaborado esta ficha.</h3>

<div class="row" style="margin-top: 10px;">
  `r get_indicator_mod(
        df_links$Enlace[which(df_links$Indicador == "Tema")],
        df_links$Titulo[which(df_links$Indicador == "Tema")])`

<div class="column-modulo-right">
<div class="highlight-modulo">

<p style="margin-bottom: 0;"> 
  <img src="img_dat/el_cn_encabezado.png"/>
</p>

</div>
</div>
</div>

<div class="row" style="margin-top: 10px;">
  `r get_indicator_mod_first(
        df_links$Enlace[which(df_links$Indicador == "Participación")],
        df_links$Titulo[which(df_links$Indicador == "Participación")])`

  `r get_indicator_mod_last(
        df_links$Enlace[which(df_links$Indicador == "Resultados")],
        df_links$Titulo[which(df_links$Indicador == "Resultados")])`

<div class="column-modulo-right">
<div class="highlight-modulo">

<p style="margin-bottom: 0;"> 
  <img src="img_dat/el_cn_serie.png"/>
</p>

<p style="margin-bottom: 0;"> 
  <img src="img_dat/el_cn_otros.png"/>
</p>

</div>
</div>
</div>


<div class="row" style="margin-top: 10px;">
</div>
<div class="logo-fecam">
  <img src="img/fecam.jpeg" />
</div>
<div class="logo-istac"> 
  <img src="img/logo_istac.png" />
</div>

